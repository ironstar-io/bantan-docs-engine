#!/usr/bin/env node

'use strict'

const fs = require('fs-extra')
const { CONTENT_ROOT_NAME } = require('./constants')

const startDev = async () => {
  try {
    await Promise.all([
      fs.copy(
        `./node_modules/@ironstar/docs-engine/template/${CONTENT_ROOT_NAME}`,
        `./${CONTENT_ROOT_NAME}`
      ),
      fs.copy('./node_modules/@ironstar/docs-engine/template/src', './src'),
      fs.copy(
        './node_modules/@ironstar/docs-engine/template/gatsby-config.js',
        './gatsby-config.js'
      ),
      fs.copy(
        './node_modules/@ironstar/docs-engine/template/gatsby-node.js',
        './gatsby-node.js'
      ),
      fs.copy(
        './node_modules/@ironstar/docs-engine/template/gatsby-browser.js',
        './gatsby-browser.js'
      ),
      fs.copy(
        './node_modules/@ironstar/docs-engine/template/dengine-config.js',
        './dengine-config.js'
      ),
    ])
  } catch (err) {
    console.error(err)
    process.exit(1)
  }
}

startDev()
